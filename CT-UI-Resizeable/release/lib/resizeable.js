"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),selectorPrefix="ct-resizeable",edgeStep=5,minWidth=2,minHeight=2,Resizeable=function(){function i(t,e){(0,_classCallCheck2.default)(this,i),this.el=t,this.parent=e,this.initVar(),this.initEvents()}return(0,_createClass2.default)(i,[{key:"initVar",value:function(){this.isCanResize=!1,this.isDown=!1,this.baseX=null,this.baseY=null,this.baseWidth=this.el.offsetWidth,this.baseHeight=this.el.offsetHeight,this.leftCritical=-this.baseWidth+minWidth,this.rightCritical=this.baseWidth-minWidth,this.topCritical=-this.baseHeight+minHeight,this.bottomCritical=this.baseHeight-minHeight,this.direction=null,this.clientX=this.el.offsetLeft,this.clientY=this.el.offsetTop}},{key:"initEvents",value:function(){var r=this;this.el.addEventListener("mousedown",function(t){if(!r.isCanResize)return!1;r.isDown=!0,(r.parent.cur=r).baseX=t.clientX,r.baseY=t.clientY}),this.el.addEventListener("mousemove",function(t){if(r.parent.cur&&r.parent.cur!==r)return!1;if(r.isCanResize&&r.isDown)return!1;t.preventDefault(),t.stopPropagation(),r.rect=r.el.getBoundingClientRect();var e=t.clientX,i=t.clientY;e-edgeStep<=r.rect.left&&i-edgeStep>r.rect.top&&i+edgeStep<r.rect.bottom?(r.direction="left",r.isCanResize=!0,r.el.style.cursor="w-resize"):e+edgeStep>=r.rect.right&&i-edgeStep>r.rect.top&&i+edgeStep<r.rect.bottom?(r.direction="right",r.isCanResize=!0,r.el.style.cursor="e-resize"):e-edgeStep<=r.rect.left&&i-edgeStep<=r.rect.top?(r.direction="lefttop",r.isCanResize=!0,r.el.style.cursor="nw-resize"):e-edgeStep<=r.rect.left&&i+edgeStep>=r.rect.bottom?(r.direction="leftbottom",r.isCanResize=!0,r.el.style.cursor="sw-resize"):e+edgeStep>=r.rect.right&&i-edgeStep<=r.rect.top?(r.direction="righttop",r.isCanResize=!0,r.el.style.cursor="ne-resize"):e+edgeStep>=r.rect.right&&i+edgeStep>=r.rect.bottom?(r.direction="rightbottom",r.isCanResize=!0,r.el.style.cursor="se-resize"):i-edgeStep<=r.rect.top&&e-edgeStep>r.rect.left&&e+edgeStep<r.rect.right?(r.direction="top",r.isCanResize=!0,r.el.style.cursor="n-resize"):i+edgeStep>=r.rect.bottom&&e-edgeStep>r.rect.left&&e+edgeStep<r.rect.right?(r.direction="bottom",r.isCanResize=!0,r.el.style.cursor="s-resize"):(r.isCanResize=!1,r.parent.cur=null,r.el.style.cursor="default")})}},{key:"reset",value:function(){this.isCanResize=!1,this.isDown=!1,this.baseX=null,this.baseY=null,this.baseWidth=this.el.offsetWidth,this.baseHeight=this.el.offsetHeight,this.leftCritical=-this.baseWidth+minWidth,this.rightCritical=this.baseWidth-minWidth,this.topCritical=-this.baseHeight+minHeight,this.bottomCritical=this.baseHeight-minHeight,this.clientX=this.el.offsetLeft,this.clientY=this.el.offsetTop,this.direction=null}}]),i}(),ResizeableGroup=function(){function e(t){(0,_classCallCheck2.default)(this,e),this.el=t,this.rect=this.el.getBoundingClientRect(),this.cur=null,this.initEvents(),this.init()}return(0,_createClass2.default)(e,[{key:"initEvents",value:function(){var l=this;l.el.addEventListener("mousemove",function(t){if(!(l.cur&&l.cur.isCanResize&&l.cur.isDown))return l.cur&&l.reset(),!1;var e=t.clientX,i=t.clientY,r=e-l.cur.baseX,c=i-l.cur.baseY,s=l.cur.clientX,n=l.cur.clientY;"right"===l.cur.direction?l.cur.el.style.width=r>l.cur.leftCritical?"".concat(l.cur.baseWidth+r,"px"):"".concat(minWidth,"px"):"left"===l.cur.direction?(l.cur.el.style.width=r<l.cur.rightCritical?"".concat(l.cur.baseWidth-r,"px"):"".concat(minWidth,"px"),l.cur.el.style.left=r<l.cur.rightCritical?"".concat(s+r,"px"):"".concat(s+l.cur.rightCritical,"px")):"top"===l.cur.direction?(l.cur.el.style.height=c<l.cur.bottomCritical?"".concat(l.cur.baseHeight-c,"px"):"".concat(minHeight,"px"),l.cur.el.style.top=c<l.cur.bottomCritical?"".concat(n+c,"px"):"".concat(n+l.cur.bottomCritical,"px")):"bottom"===l.cur.direction?l.cur.el.style.height=c>l.cur.topCritical?"".concat(l.cur.baseHeight+c,"px"):"".concat(minHeight,"px"):"lefttop"===l.cur.direction?(l.cur.el.style.width=r<l.cur.rightCritical?"".concat(l.cur.baseWidth-r,"px"):"".concat(minWidth,"px"),l.cur.el.style.left=r<l.cur.rightCritical?"".concat(s+r,"px"):"".concat(s+l.cur.rightCritical,"px"),l.cur.el.style.height=c<l.cur.bottomCritical?"".concat(l.cur.baseHeight-c,"px"):"".concat(minHeight,"px"),l.cur.el.style.top=c<l.cur.bottomCritical?"".concat(n+c,"px"):"".concat(n+l.cur.bottomCritical,"px")):"leftbottom"===l.cur.direction?(l.cur.el.style.width=r<l.cur.rightCritical?"".concat(l.cur.baseWidth-r,"px"):"".concat(minWidth,"px"),l.cur.el.style.left=r<l.cur.rightCritical?"".concat(s+r,"px"):"".concat(s+l.cur.rightCritical,"px"),l.cur.el.style.height=c>l.cur.topCritical?"".concat(l.cur.baseHeight+c,"px"):"".concat(minHeight,"px")):"righttop"===l.cur.direction?(l.cur.el.style.width=r>l.cur.leftCritical?"".concat(l.cur.baseWidth+r,"px"):"".concat(minWidth,"px"),l.cur.el.style.height=c<l.cur.bottomCritical?"".concat(l.cur.baseHeight-c,"px"):"".concat(minHeight,"px"),l.cur.el.style.top=c<l.cur.bottomCritical?"".concat(n+c,"px"):"".concat(n+l.cur.bottomCritical,"px")):"rightbottom"===l.cur.direction&&(l.cur.el.style.width=r>l.cur.leftCritical?"".concat(l.cur.baseWidth+r,"px"):"".concat(minWidth,"px"),l.cur.el.style.height=c>l.cur.topCritical?"".concat(l.cur.baseHeight+c,"px"):"".concat(minHeight,"px"))}),l.el.addEventListener("mouseup",function(){if(!(l.cur&&l.cur.isCanResize&&l.cur.isDown))return!1;l.reset()})}},{key:"reset",value:function(){this.cur&&this.cur.reset(),this.cur=null}},{key:"init",value:function(){var t=this.el.querySelectorAll(".".concat(selectorPrefix,"-item"));this.ins=[];for(var e=0;e<t.length;e++)this.ins.push(new Resizeable(t[e],this,e))}},{key:"refresh",value:function(){this.init()}}]),e}(),ResizeableGroupManager=function(){function t(){(0,_classCallCheck2.default)(this,t),this.init()}return(0,_createClass2.default)(t,[{key:"init",value:function(){this.resizeManagers=[];for(var t=document.querySelectorAll(".".concat(selectorPrefix)),e=0;e<t.length;e++)this.resizeManagers.push(new ResizeableGroup(t[e]))}},{key:"refresh",value:function(){this.init()}}]),t}(),ResizeableFactory={create:function(){return new ResizeableGroupManager}},_default=ResizeableFactory;exports.default=_default;
//# sourceMappingURL=resizeable.js.map
