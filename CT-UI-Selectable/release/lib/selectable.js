"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),selectorPrefix="ct-selectable-";function initEvents(){var C=this;C.el.addEventListener("mousedown",function(e){var l=C.disable;if(void 0!==l&&l)return!1;C.isdown=!0,console.log("mousedown"),C.cloneEl&&(C.ismove=!1,C.cloneEl.parentElement.removeChild(C.cloneEl),C.cloneEl=null),C.baseX=e.clientX,C.baseY=e.clientY;var t=document.createElement("div");t.innerHTML='<div class="'.concat(selectorPrefix,'select"></div>'),C.cloneEl=t.firstElementChild,C.config.rangeClasses&&0!==C.config.rangeClasses.length&&C.config.rangeClasses.map(function(e){C.cloneEl.classList.contains(e)||C.cloneEl.classList.add(e)}),C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.top="".concat(C.baseY,"px"),C.cloneEl.addEventListener("mouseup",function(){C.ismove=!1,C.isdown=!1,C.baseX=null,C.baseY=null,C.cloneEl&&(C.cloneEl.parentElement.removeChild(C.cloneEl),C.cloneEl=null),C.config.upInclude&&C.config.upInclude([].concat(C.includeEls))}),C.cloneEl.addEventListener("mouseleave",function(){}),C.el.appendChild(C.cloneEl)}),C.el.addEventListener("mousemove",function(e){var l=C.disable;if(void 0!==l&&l)return!1;if(!C.isdown)return!1;C.ismove=!0,e.preventDefault();var t=e.clientX,n=e.clientY,c=C.el.getBoundingClientRect();if(!(t>=c.left&&t<=c.right&&n>=c.top&&n<=c.bottom))return!1;if(C.baseY===n)C.cloneEl.style.height="0",C.baseX>t?(C.cloneEl.style.left="".concat(t,"px"),C.cloneEl.style.right="".concat(C.baseX,"px"),C.cloneEl.style.top="".concat(n,"px")):(C.baseX<t?(C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.right="".concat(t,"px")):(C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.right="".concat(C.baseX,"px")),C.cloneEl.style.top="".concat(C.baseY,"px"));else if(C.baseX===t)C.cloneEl.style.width="0",n<C.baseY?(C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.top="".concat(n,"px"),C.cloneEl.style.bottom="".concat(C.baseY,"px")):n>C.baseY?(C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.top="".concat(C.baseY,"px"),C.cloneEl.style.bottom="".concat(n,"px")):(C.cloneEl.style.left="".concat(C.baseX,"px"),C.cloneEl.style.right="".concat(C.baseX,"px"),C.cloneEl.style.top="".concat(C.baseY,"px"));else{var o,s,a,i,u=Math.abs(C.baseX-t),r=Math.abs(C.baseY-n);t<C.baseX&&n<C.baseY?(o=t,s=C.baseX,a=n,i=C.baseY):t>C.baseX&&n<C.baseY?(o=C.baseX,s=t,a=n,i=C.baseY):t<C.baseX&&n>C.baseY?(o=t,s=C.baseX,a=C.baseY,i=n):t>C.baseX&&n>C.baseY&&(o=C.baseX,s=t,a=C.baseY,i=n),C.cloneEl.style.width="".concat(u,"px"),C.cloneEl.style.height="".concat(r,"px"),C.cloneEl.style.left="".concat(o,"px"),C.cloneEl.style.right="".concat(s,"px"),C.cloneEl.style.top="".concat(a,"px"),C.cloneEl.style.bottom="".concat(i,"px")}C.includeEls=[],C.excludeEls=[];for(var d=C.cloneEl.getBoundingClientRect(),b=C.el.querySelectorAll(".".concat(selectorPrefix,"item")),E=0;E<b.length;E++){var p=b[E],f=p.getBoundingClientRect(),v=f.left,h=f.right,m=f.top,g=f.bottom,x=d.left,y=d.right,X=d.top,Y=d.bottom;Math.abs(y+x-h-v)<=h-v+y-x&&Math.abs(Y+X-g-m)<=g-m+Y-X?C.includeEls.push(p):C.excludeEls.push(p)}C.config.moveInclude&&C.config.moveInclude([].concat(C.includeEls)),C.config.moveExclude&&C.config.moveExclude([].concat(C.excludeEls))}),C.el.addEventListener("mouseup",function(){var e=C.disable;if(void 0!==e&&e)return!1;C.ismove=!1,C.isdown=!1,C.baseX=null,C.baseY=null,C.cloneEl&&(C.cloneEl.parentElement.removeChild(C.cloneEl),C.cloneEl=null),C.config.upInclude&&C.config.upInclude([].concat(C.includeEls))}),C.el.addEventListener("mouseleave",function(){}),document.body.addEventListener("mouseup",function(){var e=C.disable;if(void 0!==e&&e)return!1;C.ismove=!1,C.isdown=!1,C.baseX=null,C.baseY=null,C.cloneEl&&(C.cloneEl.parentElement.removeChild(C.cloneEl),C.cloneEl=null),C.config.upInclude&&C.config.upInclude([].concat(C.includeEls))})}var Selectable=function(){function t(e,l){(0,_classCallCheck2.default)(this,t),this.el=e,this.config=Object.assign({},l),this.disable=!1,this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.cloneEl=null,this.includeEls=[],this.excludeEls=[],initEvents.call(this)}return(0,_createClass2.default)(t,[{key:"setDisable",value:function(e){this.disable=e}}]),t}(),SelectableFactory={create:function(e,l){return new Selectable(e,l)}},_default=SelectableFactory;exports.default=_default;
//# sourceMappingURL=selectable.js.map
