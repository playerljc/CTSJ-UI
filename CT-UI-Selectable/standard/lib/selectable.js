"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),selectorPrefix="ct-selectable-";function initEvents(){var Y=this;Y.el.addEventListener("mousedown",function(e){Y.isdown=!0,console.log("mousedown"),Y.cloneEl&&(Y.ismove=!1,Y.cloneEl.parentElement.removeChild(Y.cloneEl),Y.cloneEl=null),Y.baseX=e.clientX,Y.baseY=e.clientY;var l=document.createElement("div");l.innerHTML='<div class="'.concat(selectorPrefix,'select"></div>'),Y.cloneEl=l.firstElementChild,Y.config.rangeClasses&&0!==Y.config.rangeClasses.length&&Y.config.rangeClasses.map(function(e){Y.cloneEl.classList.contains(e)||Y.cloneEl.classList.add(e)}),Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.top="".concat(Y.baseY,"px"),Y.cloneEl.addEventListener("mouseup",function(){Y.ismove=!1,Y.isdown=!1,Y.baseX=null,Y.baseY=null,Y.cloneEl&&(Y.cloneEl.parentElement.removeChild(Y.cloneEl),Y.cloneEl=null),Y.config.upInclude&&Y.config.upInclude([].concat(Y.includeEls))}),Y.cloneEl.addEventListener("mouseleave",function(){}),Y.el.appendChild(Y.cloneEl)}),Y.el.addEventListener("mousemove",function(e){if(!Y.isdown)return!1;Y.ismove=!0,e.preventDefault();var l=e.clientX,t=e.clientY,n=Y.el.getBoundingClientRect();if(!(l>=n.left&&l<=n.right&&t>=n.top&&t<=n.bottom))return!1;if(Y.baseY===t)Y.cloneEl.style.height="0",Y.baseX>l?(Y.cloneEl.style.left="".concat(l,"px"),Y.cloneEl.style.right="".concat(Y.baseX,"px"),Y.cloneEl.style.top="".concat(t,"px")):(Y.baseX<l?(Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.right="".concat(l,"px")):(Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.right="".concat(Y.baseX,"px")),Y.cloneEl.style.top="".concat(Y.baseY,"px"));else if(Y.baseX===l)Y.cloneEl.style.width="0",t<Y.baseY?(Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.top="".concat(t,"px"),Y.cloneEl.style.bottom="".concat(Y.baseY,"px")):t>Y.baseY?(Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.top="".concat(Y.baseY,"px"),Y.cloneEl.style.bottom="".concat(t,"px")):(Y.cloneEl.style.left="".concat(Y.baseX,"px"),Y.cloneEl.style.right="".concat(Y.baseX,"px"),Y.cloneEl.style.top="".concat(Y.baseY,"px"));else{var c,o,s,a,i=Math.abs(Y.baseX-l),u=Math.abs(Y.baseY-t);l<Y.baseX&&t<Y.baseY?(c=l,o=Y.baseX,s=t,a=Y.baseY):l>Y.baseX&&t<Y.baseY?(c=Y.baseX,o=l,s=t,a=Y.baseY):l<Y.baseX&&t>Y.baseY?(c=l,o=Y.baseX,s=Y.baseY,a=t):l>Y.baseX&&t>Y.baseY&&(c=Y.baseX,o=l,s=Y.baseY,a=t),Y.cloneEl.style.width="".concat(i,"px"),Y.cloneEl.style.height="".concat(u,"px"),Y.cloneEl.style.left="".concat(c,"px"),Y.cloneEl.style.right="".concat(o,"px"),Y.cloneEl.style.top="".concat(s,"px"),Y.cloneEl.style.bottom="".concat(a,"px")}Y.includeEls=[],Y.excludeEls=[];for(var E=Y.cloneEl.getBoundingClientRect(),r=Y.el.querySelectorAll(".".concat(selectorPrefix,"item")),d=0;d<r.length;d++){var b=r[d],p=b.getBoundingClientRect(),f=p.left,h=p.right,m=p.top,v=p.bottom,g=E.left,x=E.right,y=E.top,X=E.bottom;Math.abs(x+g-h-f)<=h-f+x-g&&Math.abs(X+y-v-m)<=v-m+X-y?Y.includeEls.push(b):Y.excludeEls.push(b)}Y.config.moveInclude&&Y.config.moveInclude([].concat(Y.includeEls)),Y.config.moveExclude&&Y.config.moveExclude([].concat(Y.excludeEls))}),Y.el.addEventListener("mouseup",function(){Y.ismove=!1,Y.isdown=!1,Y.baseX=null,Y.baseY=null,Y.cloneEl&&(Y.cloneEl.parentElement.removeChild(Y.cloneEl),Y.cloneEl=null),Y.config.upInclude&&Y.config.upInclude([].concat(Y.includeEls))}),Y.el.addEventListener("mouseleave",function(){}),document.body.addEventListener("mouseup",function(){Y.ismove=!1,Y.isdown=!1,Y.baseX=null,Y.baseY=null,Y.cloneEl&&(Y.cloneEl.parentElement.removeChild(Y.cloneEl),Y.cloneEl=null),Y.config.upInclude&&Y.config.upInclude([].concat(Y.includeEls))})}var Selectable=function e(l,t){(0,_classCallCheck2.default)(this,e),this.el=l,this.config=Object.assign({},t),this.isdown=!1,this.ismove=!1,this.baseX=null,this.baseY=null,this.cloneEl=null,this.includeEls=[],this.excludeEls=[],initEvents.call(this)},SelectableFactory={create:function(e,l){return new Selectable(e,l)}},_default=SelectableFactory;exports.default=_default;
//# sourceMappingURL=selectable.js.map
